<!-- aprendices/templates/aprendices/inasistencia_form.html -->
{% extends "aprendices/base.html" %}

{% block page_title %}Registrar Inasistencia{% endblock %}

{% block content %}
<div style="max-width: 700px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h2 style="color: var(--text-dark); font-size: 24px;">
            <i class="fas fa-clipboard-list"></i> Registrar Nueva Inasistencia
        </h2>
        <a href="{% url 'inasistencia_list' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Volver
        </a>
    </div>

    <div class="form-container">
        <form method="post">
            {% csrf_token %}
            
            <!-- Información del Aprendiz -->
            <div style="background: var(--sena-green); color: white; padding: 12px 15px; margin: -30px -30px 25px -30px; border-radius: 10px 10px 0 0;">
                <h3 style="margin: 0; font-size: 16px;">
                    <i class="fas fa-user"></i> Información del Aprendiz
                </h3>
            </div>
            
            <div class="form-group">
                <label for="{{ form.aprendiz.id_for_label }}">{{ form.aprendiz.label }} *</label>
                {{ form.aprendiz }}
                <small style="color: #999; font-size: 12px; display: block; margin-top: 5px;">
                    Selecciona el aprendiz que presentó la inasistencia
                </small>
                {% if form.aprendiz.errors %}
                    <div style="color: #dc3545; font-size: 12px; margin-top: 5px;">{{ form.aprendiz.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.ficha.id_for_label }}">{{ form.ficha.label }} *</label>
                {{ form.ficha }}
                {% if form.ficha.errors %}
                    <div style="color: #dc3545; font-size: 12px; margin-top: 5px;">{{ form.ficha.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Detalles de la Inasistencia -->
            <div style="background: #f08c00; color: white; padding: 12px 15px; margin: 30px -30px 25px -30px;">
                <h3 style="margin: 0; font-size: 16px;">
                    <i class="fas fa-calendar-times"></i> Detalles de la Inasistencia
                </h3>
            </div>
            
            <div class="form-group">
                <label for="{{ form.fecha.id_for_label }}">{{ form.fecha.label }} *</label>
                {{ form.fecha }}
                {% if form.fecha.errors %}
                    <div style="color: #dc3545; font-size: 12px; margin-top: 5px;">{{ form.fecha.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.motivo.id_for_label }}">{{ form.motivo.label }}</label>
                {{ form.motivo }}
                <small style="color: #999; font-size: 12px; display: block; margin-top: 5px;">
                    Describe el motivo o circunstancia de la inasistencia
                </small>
            </div>
            
            <div class="form-group">
                <label for="{{ form.reportado_por.id_for_label }}">{{ form.reportado_por.label }}</label>
                {{ form.reportado_por }}
                <small style="color: #999; font-size: 12px; display: block; margin-top: 5px;">
                    Nombre del instructor o coordinador que reporta
                </small>
            </div>
            
            <!-- Estado de Justificación -->
            <div style="background: #0066a1; color: white; padding: 12px 15px; margin: 30px -30px 25px -30px;">
                <h3 style="margin: 0; font-size: 16px;">
                    <i class="fas fa-check-circle"></i> Estado de Justificación
                </h3>
            </div>
            
            <div class="form-group">
                <div style="display: flex; align-items: center; gap: 12px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    {{ form.justificada }}
                    <label for="{{ form.justificada.id_for_label }}" style="margin: 0; cursor: pointer; color: var(--text-dark);">
                        {{ form.justificada.label }}
                    </label>
                </div>
                <small style="color: #999; font-size: 12px; display: block; margin-top: 8px;">
                    Marca esta casilla si la inasistencia cuenta con justificación válida (certificado médico, calamidad, etc.)
                </small>
            </div>
            
            <!-- Botones -->
            <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                <a href="{% url 'inasistencia_list' %}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancelar
                </a>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Registrar Inasistencia
                </button>
            </div>
        </form>
    </div>

    <!-- Información adicional -->
    <div style="margin-top: 30px; padding: 20px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 8px;">
        <h4 style="color: #856404; margin-bottom: 15px; font-size: 16px;">
            <i class="fas fa-lightbulb"></i> Importante
        </h4>
        <ul style="color: #856404; margin-left: 20px; line-height: 1.8; font-size: 14px;">
            <li>Las inasistencias no justificadas afectan el proceso de certificación del aprendiz</li>
            <li>Según la normativa del SENA, 3 inasistencias injustificadas pueden generar llamado de atención</li>
            <li>Asegúrate de registrar el motivo correctamente para el seguimiento</li>
            <li>Las inasistencias justificadas deben contar con soporte documental</li>
        </ul>
    </div>
</div>

<style>
    .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s ease;
    }
    
    .form-control:focus {
        outline: none;
        border-color: var(--sena-green);
        box-shadow: 0 0 0 3px rgba(57, 169, 0, 0.1);
    }
    
    .form-check-input {
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: var(--sena-green);
    }
    
    select.form-control {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 15px center;
        padding-right: 40px;
        appearance: none;
    }
</style>
{% endblock %}